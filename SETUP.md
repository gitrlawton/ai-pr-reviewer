# Setting up and Configuring NGROK

1. Download the NGROK executable from [https://download.ngrok.com/](https://download.ngrok.com/). This will be used to create a secure tunnel to your local server.

2. Grab your NGROK auth token by visiting this link: [https://dashboard.ngrok.com/get-started/your-authtoken](https://dashboard.ngrok.com/get-started/your-authtoken)

3. Open the NGROK executable you downloaded. This will open a new terminal window. Inside the terminal window, configure NGROK with the following command:

   ```bash
   ngrok config add-authtoken <your_auth_token_here>
   ```

4. Run NGROK in your terminal with the following command:

   ```bash
   ngrok http 3000
   ```

   You should now see a Forwarding URL in the format of `https://<random>.ngrok-free.app`. Make sure to save this URL as you'll need it to configure your GitHub App.

   **Note:** If you Ctrl+C to close ngrok and then restart it, that will generate a brand new URL. This means you’ll need to update the WebHook URL in your GitHub app's configuration (introduced in the next section).

---

# Creating your GitHub App

5. Create a new GitHub App here: [https://github.com/settings/apps](https://github.com/settings/apps)

   Then, complete the following:

   - Name the App anything you want, and just use your GitHub profile URL for the Homepage URL.
   - Use the URL generated by NGROK as the "Webhook URL", and add `/api/review` to the end of it (example: `https://4836-204-48-36-234.ngrok-free.app/api/review`).
   - Make up a combination of characters to use for the Webhook secret (this can be anything). Copy this somewhere, because you’ll need it for one of the environment variables in a bit.
   - For the repository permissions, grant the app read & write permissions for the following:
     - Commit statuses
     - Contents
     - Issues
     - Pull requests
     - Webhooks
   - Subscribe to the following events:
     - Commit comment
     - Pull request
     - Pull request review
     - Pull request review comment
     - Pull Request review thread

   Click the "Create GitHub App" button.

6. Click the "generate a private key" hyperlink, followed by the "Generate a private key" button. This should automatically download your private key (this will be used for one of the environment variables).

7. Install your GitHub app to all of your repositories by clicking the "Install App" tab from the left pane of the current page, and then select "All repositories."

---

# Setting up the AI PR Reviewer Application

8. Open another terminal and navigate to where you’d like to clone the AI PR Reviewer repo to. Then, run the following to clone it:

   ```bash
   git clone https://github.com/gitrlawton/ai-pr-reviewer
   ```

9. cd into the cloned repository by running:

   ```bash
   cd ai-pr-reviewer
   ```

10. Run the following to make sure you are using the latest version of npm:

    ```bash
    npm install -g npm@latest
    ```

11. Then, run the following to install the project dependencies:
    ```bash
    npm install
    ```

---

# Setting up the Environment Variables

12. Open the AI PR Reviewer project in your IDE, and create a `.env` file with the following variables:

```
GITHUB_PRIVATE_KEY=
GITHUB_APP_ID=
GITHUB_WEBHOOK_SECRET=
GROQ_API_KEY=
```

For `GITHUB_PRIVATE_KEY`, locate the .pem file that was downloaded following the creation of the GitHub App in Step 6, and open it in a text editor such as Notepad.

Copy and paste the entire contents of the file, beginning with `-----BEGIN RSA PRIVATE KEY-----` and ending with `-----END RSA PRIVATE KEY-----`.

Lastly, wrap the pasted contents in quotes (`"---.....---"`).

For `GITHUB_APP_ID`, go to [https://github.com/settings/apps](https://github.com/settings/apps) and click on the App you created. In the About section, you’ll see the App ID.

For `GITHUB_WEBHOOK_SECRET`, this is the combination of characters you used for the Webhook secret when creating your GitHub App in Step 5.

For `GROQ_API_KEY`, create a Groq API key here: [https://console.groq.com/keys](https://console.groq.com/keys). Through Groq, you'll have free access to the Llama and Gemini models.

**Note:** Make sure to save this file after creating it. You’ll also want to create a .gitignore file and add .env to it, so that your environment variables do not get stored on GitHub.

13. Within the ai-pr-reviewer directory in your IDE’s terminal, run the following to spin up the AI PR Reviewer:
    ```bash
    npm run start
    ```

---

# Creating a Pull Request to Test the Functionality

14. In another IDE window, open a JavaScript (".js", ".jsx", ".ts", ".tsx") or a Python (".py") project you’ve worked on in the past.

15. In that window, open the terminal and create a new branch by running:

    ```bash
    git checkout -b <branch-name>
    ```

16. Make changes to the project, then run the usual series of commands to push the changes to GitHub:

    ```bash
    git add .
    git commit -m "..."
    git push origin <branch-name>
    ```

17. After pushing the changes, the terminal should output a link to visit in order to create a pull request, in the format of:
    ```
    https://github.com/<username>/<project-name>/pull/new/<branch-name>
    ```

**Final Step:** Visit the link provided in the terminal and open a new pull request. Give the pull request a name and a description, then click “Create Pull Request.”

Upon creating the pull request, you should be brought to the Conversation tab of your new pull request. Simply wait on this page for 3-4 seconds and you should see the Pull Request analysis appear as a comment from your GitHub App (bot).
